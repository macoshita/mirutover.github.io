---
layout: post
title: VirtualBox, Mac, CentOS 6.3, SSH接続, ホストオンリーアダプタ
date: 2013-04-11 01:42:13 UTC
updated: 2013-04-11 01:42:13 UTC
comments: false
categories: CentOS Mac VirtualBox
---

やりたいこと：MacでCentOSのVM作ってターミナルからSSH接続したい<br /><br />これをやるには主に2つの方法がある。<br /><ul><li>ポートフォワーディング</li><li>ホストオンリーアダプタを差す</li></ul><div>で、（実際やってないけど）ポートフォワーディングのほうが多分簡単。GUIで設定できるし。</div><div>でも、普段さくらVPSとか別のPCに立てたlinuxとかで開発してた自分としては、localhost:50080とかでアクセスするより、192.168.56.10とかでアクセスする方がしっくりくるなーという理由で、ホストオンリーアダプタを選択。</div><div><br /><b>CentOSを入れる前にアダプタを追加</b><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-NH7WlANClX0/UDJG2BNSRYI/AAAAAAAAA2I/DLTBnQMrVrw/s1600/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88+2012-08-20+23.14.17.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="111" src="http://3.bp.blogspot.com/-NH7WlANClX0/UDJG2BNSRYI/AAAAAAAAA2I/DLTBnQMrVrw/s320/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88+2012-08-20+23.14.17.png" width="320" /></a></div>入れる前のほうがnetwork-scripts/ifcfg-eth1とかOSが勝手に作ってくれるし、OS起動してると作れないしなので、このタイミングが一番楽。</div><div><br /><b>CentOSを入れる</b><br />入れるとき、eth0かeth1か選ぶところがあるので、NATアダプタの方（アダプタ１なら多分eth0）を選ぶ。<br /><br /><b>ifcfg-eth1を変更</b><br />/etc/sysconfig/network-scripts/ifcfg-eth1 （ホストオンリーアダプタの方）を下記のように変更。あとから追加した場合も、下記を書けばいけるはず。</div><pre>DEVICE="eth1"<br />#BOOTPROTO="dhcp" &lt;- コメントアウト<br />HWADDR="XX:XX:XX:XX:XX:XX" # アダプタのmacアドレス<br />NM_CONTROLLED="yes"<br />ONBOOT="yes"<br />TYPE="Ethernet"<br />UUID="hogehoge" # アダプタのUUID<br /><br />IPADDR=192.168.56.10 # 追加<br />NETMASK=255.255.255.0 # 追加<br />NETWORK=192.168.56.0 # 追加<br /></pre>このあと、<br /><pre>service network restart</pre>で初期化。<br /><br /><b>接続テスト</b><br />ターミナルを開いて、ssh root@192.168.56.10 とかでSSH接続確認。<br />さらに接続先のVM上で ping example.com とかで外向きの通信も確認。<br /><br /><b>その他</b><br />yum install httpd とかしてapache立てたら、192.168.56.10にアクセスすれば見れるはず。iptablesを切るなり開けるなりが必要になる。<br /><br /><b>まとめと雑談</b><br />思いの外すんなりできてよかった。VirtualBox、けっこう設定項目がわかりやすい感じで好きかも。<br />SSH接続については、Windowsと比べてteratermを入れる必要がないのはいいけどWinSCP代替でいいのが無さそうっぽい？　自分の用途では、ほとんどWinSCP使ってなかったから、scpコマンドやrsyncで事足りる気はしてるけれど。<br /><br /><b>参考</b><br /><a href="http://d.hatena.ne.jp/erio_nk/20120501/1335881271">http://d.hatena.ne.jp/erio_nk/20120501/1335881271</a><br />いろんなところを参考にしたけど、↑がやりたいことそのものでした。ありがとうございます。